<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<script>
function render(node_ids, is_red) {
  if(node_ids.length == 0)
    return

  first_id = node_ids.shift()
  get(first_id, function(node) {
    $('.node[id={id}]'.replace('{id}', first_id)).attr('is_red', is_red)
    render(node.child_ids.concat(node_ids), !is_red)
  })
}

function get(id, callback) {
  setTimeout(function() { callback(nodes[id]) }, 100)
}

nodes = {
  1:{child_ids:[2,5]}, 2:{child_ids:[3,4]}, 3:{child_ids:[]}, 4:{child_ids:[]},
  5:{child_ids:[6]}, 6:{child_ids:[]}, 7:{child_ids:[]}
}

render([1, 7], true)
</script>

<style>
.node {margin-left:10px; border:1px solid; border-color:#ffff00}
.node[is_red=true] {background-color:#ff0000}
.node[is_red=false] {background-color:#000000}
</style>

<div class='node' id='1'>&nbsp;
  <div class='node' id='2'>&nbsp;
    <div class='node' id='3'>&nbsp;</div>
    <div class='node' id='4'>&nbsp;</div>
  </div>
  <div class='node' id='5'>&nbsp;
    <div class='node' id='6'>&nbsp;</div>
  </div>
</div>
<div class='node' id='7'>&nbsp;
</div>