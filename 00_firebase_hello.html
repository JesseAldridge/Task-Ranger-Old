
<!-- Html scaffolding.  Include javascript libs.-->

<html>
  <head>
    <script src='https://cdn.firebase.com/v0/firebase.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'>
    </script>
  </head>
  <body>

    <div class="new_node" style="border:1 solid; cursor:pointer">New node</div>
    <div class="nodes"></div>

    <script>

    // Hook firebase top-level.  Setup click event handlers.

    console.log('yep...')
    var root_ref = new Firebase('https://taskranger.firebaseio.com/test_tree')
    root_ref.once('value', function(snap) {
      var nodes = snap.val().nodes
      for(var key in nodes)
        $('.nodes').append("<div>Node {0}</div>".replace('{0}', nodes[key].node_id))
    })

    $('.new_node').click(function() {
      root_ref.child('nodes').push({node_id:Math.random()})
    })
    </script>
  </body>
</html>
