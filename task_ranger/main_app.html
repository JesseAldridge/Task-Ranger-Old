<!DOCTYPE html>

<!-- Html scaffolding.  Include javascript libs.-->

<html>
  <head>
    <script src="https://cdn.firebase.com/js/simple-login/1.6.1/firebase-simple-login.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="https://cdn.firebase.com/js/client/1.0.21/firebase.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.3/moment.min.js"></script>
    <script src="./static/jquery.tmpl.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="./static/smoothness/jquery-ui-1.8.12.custom.css" type="text/css" />
    <link rel="stylesheet" href="./static/tree.css" type="text/css" />
    <link rel="stylesheet" href="./static/tr.css" type="text/css" />
    <script src="https://cdn.rawgit.com/sindresorhus/multiline/69c26c826ec8909b8a92da37ae7aba562362faff/browser.js"></script>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script src="https://rawgit.com/Eonasdan/bootstrap-datetimepicker/master/src/js/bootstrap-datetimepicker.js"></script>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="https://rawgit.com/Eonasdan/bootstrap-datetimepicker/master/build/css/bootstrap-datetimepicker.min.css" type="text/css" />
    <script src="./static/std.js"></script>
    <script src="./static/jquery.ui.nestedSortable.js"></script>
    <script src="./static/PorterStemmer2.js"></script>
    <script src="./01_write_test_data.js"></script>
    <script src="./02_local_nodes.js"></script>
    <script src="./03_json_to_node.js"></script>
    <script src="./04_render_tree.js"></script>
    <script src="./05_render_intervals.js"></script>
    <script src="./06_add_nodes.js"></script>
    <script src="./07_delete_nodes.js"></script>
    <script src="./08_drag_and_drop.js"></script>
    <script src="./09_cum_time.js"></script>
    <script src="./10_ping.js"></script>
    <script src="./11_edit_times.js"></script>
    <script src="./12_tags.js"></script>

  </head>
  <body>

    <button class="login-layer login" id="login-github" style="display: none">Log in with GitHub</button>
    <button class="login-layer login" id="login-twitter" style="display: none">Log in with Twitter</button>
    <button class="logout-layer login" style="display: none; float:right" id="logout">Log out</button>

    <ul id='top5' style="float:left"></ul>
    <div id="stack" class="stack"></div>
    <div style="clear:both"></div>
    <div class="buttons"></div>
    <div><ol id="tree_section"></ol></div>
    <p class='note'>Note:  Data is saved automatically.</p>
    <p class='note'><a href='/example.html'>Example page</a></p>
    <p class='note' style='margin-top:50px'>By:  <a href='http://jessealdridge.com' target="_blank">Jesse Aldridge</a></p>

    <script>

    var ref = new Firebase('https://taskranger.firebaseio.com/')
    var auth = new FirebaseSimpleLogin(ref, function(err,user) {
      if(err)
        alert(err)
      else if(user) {
        $('.login-layer').hide()
        // $('.logout-layer').show()
        RemoteTree.prototype.get_user_root = function(){ return 'user_trees/' + user.uid + '/' }
        global_tree = new RemoteTree()
      }
      else {
        $('.login-layer').show()
        $('.logout-layer').hide()
      }
    })

    $('#login-github').click(function() { auth.login('github', { rememberMe: true }) })
    $('#login-twitter').click(function() { auth.login('twitter', { rememberMe: true }) })
    $('#logout').click(function() { auth.logout() });

    </script>

  </body>
</html>
