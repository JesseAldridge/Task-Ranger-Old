<!DOCTYPE html>

<!-- Html scaffolding.  Include javascript libs.-->

<html>
  <head>
    <script src="static/PorterStemmer2.js"></script>
    <script src="https://cdn.firebase.com/js/simple-login/1.6.1/firebase-simple-login.js"></script>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'></script>
    <script src='static/jquery.tmpl.min.js'></script>
    <script src='https://cdn.firebase.com/v0/firebase.js'></script>
    <script src="https://code.jquery.com/ui/1.10.4/jquery-ui.min.js"></script>
    <script src="static/jquery.mjs.nestedSortable.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.6.0/moment.min.js"></script>

    <script src='static/std.js'></script>
    <script src='static/01_local_nodes.js'></script>
    <script src='static/02_render_tree.js'></script>
    <script src='static/03_json_to_node.js'></script>
    <script src='static/04_toggle_collapse.js'></script>
    <script src='static/05_add_nodes.js'></script>
    <script src='static/06_delete_nodes.js'></script>
    <script src='static/07_drag_and_drop.js'></script>
    <script src='static/08_ping.js'></script>
    <script src='static/09_edit_times.js'></script>
    <script src='static/10_tags.js'></script>
    <script src='static/11_graph.js'></script>
    <script src="static/jquery.flot.js"></script>
    <script src="static/jquery.flot.stack.js"></script>
    <link rel="stylesheet" href="static/smoothness/jquery-ui-1.8.12.custom.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="static/tree.css" />
    <link rel="stylesheet" type="text/css" href="static/tr.css" />
  </head>
  <body>

    <button class="login-layer login" id="login-github" style="display: none">Log in with GitHub</button>
    <button class="login-layer login" id="login-twitter" style="display: none">Log in with Twitter</button>
    <button class="logout-layer login" style="display: none; float:right" id="logout">Log out</button>

    <ul id='top5' style="float:left"></ul>
    <div id="stack" class="stack"></div>
    <div style="clear:both"></div>
    <div class="buttons"></div>
    <div><ol id="node_container"></ol></div>

    <script>

    var ref = new Firebase('https://taskranger.firebaseio.com/')
    var auth = new FirebaseSimpleLogin(ref, function(err,user) {
      if(err)
        alert(err)
      else if(user) {
        $('.login-layer').hide()
        // $('.logout-layer').show()
        RemoteTree.prototype.get_user_root = function(){ return 'user_trees/' + user.uid + '/' }
        global_tree = new RemoteTree()
      }
      else {
        $('.login-layer').show()
        $('.logout-layer').hide()
      }
    })

    $('#login-github').click(function() { auth.login('github', { rememberMe: true }) })
    $('#login-twitter').click(function() { auth.login('twitter', { rememberMe: true }) })
    $('#logout').click(function() { auth.logout() });

    </script>

  </body>
</html>
